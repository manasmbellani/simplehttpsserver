# simplehttpsserver

## Introduction 

In summary, This script will generate a HTTPS Server indexing the current directory for serving page requests.

## Objective

A quick, simple way of bypassing deep packet inspection mechanisms. Proved especially useful in pentest engagements.

## Function

It utilizes openssl to generate self-signed ssl keys and then launch the SSL server utilizing the key. The directory in which the python file is present is indexed by the server for serving requests. Note that 2 new files are created by the server: 
    * SSL Certificate: for the HTTPS Server, self-signed
    * OpenSSL conf file: to generate self-signed cert with IP in SAN
It will also attempt to clean up the generate ssl keys, when interrupted with CTRL + C.


## Usage and Arguments
    
    simplehttpsserver.py <ip> <port>

    ip=IP to put on the SSL cert Subject Name
    port=SSL port on which to run the ssl server

## Requirements

    * /usr/bin/openssl (OpenSSL Linux Binary)
    
    * Correct file path to opensslconf template should be specified in 
      OPENSSL_CONF_TEMPLATE constant. If installed through the following
      command, then the default OPENSSL_CONF_TEMPLATE value is correct.
        git clone https://github.com/manasmbellani/simplehttpsserver /opt/simplehttpsserver/
    
    * Executing directory must be writable to generate and cleanup 
      server.pem and openssl conf file generated

## Examples

    * To start HTTPS Server on port 443 on the localhost in current dir, simple move simplehttpsserver.py to the appropriate server directory and run, 
        simplehttpsserver.py 127.0.0.1 443
        
      On client side, execute following to download test.txt from the server dir:
         wget --no-check-certificate https://127.0.0.1/test.txt
         OR 
         curl -k https://127.0.0.1/test.txt

## Credits

    * jww, for providing info on stackoverflow on how to generate conf 
      file for modifying conf file to generate SSL self-signed SAN cert.
      This cert ensure that the hostname matches existing IP, reducing
      one warning generated by http request tools like wget, curl. 
      Original post is here:
        https://stackoverflow.com/questions/21488845/how-can-i-generate-a-self-signed-certificate-with-subjectaltname-using-openssl

    * dergachev, for the core on how to wrap SimpleHTTPServer in HTTPS.
      Original script available here:
        https://gist.github.com/dergachev/7028596
